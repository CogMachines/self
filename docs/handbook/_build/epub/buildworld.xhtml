<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4.13. How to build the world</title>
    
    <link rel="stylesheet" href="_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" /> 
  </head>
  <body role="document">

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-to-build-the-world">
<span id="building-a-world"></span><h1>4.13. How to build the world</h1>
<blockquote>
<div>Last updated 2 February 2016 for Self 4.6.0</div></blockquote>
<p>Should you need to reconstruct a world from the source files, here’s how to do it. This section describes
how to create a default object world by reading in the Self source code distributed through the <a class="reference external" href="https://github.com/russellallen/self">GitHub repository</a><span class="link-target"> [https://github.com/russellallen/self]</span>. You can also do this after writing the world out using the transporter (<code class="docutils literal"><span class="pre">transporter</span> <span class="pre">fileOut</span> <span class="pre">fileOutAll</span></code>).</p>
<div class="section" id="from-within-the-main-self-tree">
<h2>4.13.1. From within the main Self tree</h2>
<p>To create the default object world, change your current working directory to the <code class="docutils literal"><span class="pre">objects</span></code> subdirectory of the Self source release and follow these steps:</p>
<ol class="arabic">
<li><p class="first">Start the Self VM:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">Self</span>
<span class="n">Self</span> <span class="n">Virtual</span> <span class="n">Machine</span> <span class="n">Version</span> <span class="mf">4.1</span><span class="o">.</span><span class="mi">13</span><span class="p">,</span> <span class="n">Sat</span> <span class="mi">04</span> <span class="n">Jan</span> <span class="mi">14</span> <span class="mi">12</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span> <span class="n">Mac</span> <span class="n">OS</span> <span class="n">X</span> <span class="n">i386</span> <span class="p">(</span><span class="mf">4.4</span><span class="o">-</span><span class="mi">268</span><span class="o">-</span><span class="n">g58a0717</span><span class="p">)</span>
<span class="n">Copyright</span> <span class="mi">1989</span><span class="o">-</span><span class="mi">2003</span><span class="p">:</span> <span class="n">The</span> <span class="n">Self</span> <span class="n">Group</span> <span class="p">(</span><span class="nb">type</span> <span class="n">_Credits</span> <span class="k">for</span> <span class="n">credits</span><span class="p">)</span>

<span class="n">VM</span><span class="c1">#</span>
</pre></div>
</div>
</li>
<li><p class="first">(Optional, but recommended.) Start the spy so you can watch the world fill up with objects:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">VM</span><span class="c1"># _Spy: true</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You must use the primitive to do this because the world is empty.</p>
</div>
</div></blockquote>
</li>
<li><p class="first">Read in the default world. To do this, ask Self to read expressions from a file:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">VM</span><span class="c1"># &#39;worldBuilder.self&#39; _RunScript</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="from-outside-the-main-tree">
<h2>4.13.2. From outside the main tree</h2>
<p>When developing applications which aren&#8217;t part of the main Self distribution, it is often convenient to build a Self world from a directory other than the default directory. You can specify on the command line where the main Self distribution is and the options. For example the below builds the world with morphic and also ui1. Use <code class="docutils literal"><span class="pre">-o</span> <span class="pre">none</span></code> to build without any graphics.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">Self</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">Self</span><span class="o">/</span><span class="n">objects</span><span class="o">/</span><span class="n">worldBuilder</span><span class="o">.</span><span class="n">self</span>   \
       <span class="o">-</span><span class="n">b</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">Self</span><span class="o">/</span><span class="n">objects</span>                     \
       <span class="o">-</span><span class="n">o</span> <span class="n">morphic</span><span class="p">,</span><span class="n">ui1</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="finishing-the-build">
<h2>4.13.3. Finishing the build</h2>
<p>Once you have started the <code class="docutils literal"><span class="pre">worldBuilder.self</span></code> script, you will be given options as to which features you would like in your new world.</p>
<ol class="arabic simple">
<li>Unless you have asked Self not to print script names, you should see something like:</li>
</ol>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Reading</span> <span class="n">worldBuilder</span><span class="o">.</span><span class="n">self</span><span class="o">...</span>
<span class="n">reading</span> <span class="o">./</span><span class="n">core</span><span class="o">/</span><span class="n">init</span><span class="o">.</span><span class="n">self</span><span class="o">...</span>
<span class="n">reading</span> <span class="o">./</span><span class="n">core</span><span class="o">/</span><span class="n">allCore</span><span class="o">.</span><span class="n">self</span><span class="o">...</span>
<span class="n">reading</span> <span class="o">./</span><span class="n">core</span><span class="o">/</span><span class="n">systemStructure</span><span class="o">.</span><span class="n">self</span><span class="o">...</span>
<span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic" start="2">
<li><p class="first">Unless you have specified the options on the command line, then at various places, you will be asked if you wish to add optional additions to the base system, such as the morphic user interface (UI2) or the earlier UI1 (which requires X11 to run):</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span>Load UI2 (Morphic)? (y/N)
&gt; y
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">After all the files have been read in, Self will start the process scheduler, initialize its module cache, and print:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span>“Self 0”
</pre></div>
</div>
<p>That last line is the Self prompt indicating that the system is ready to read and evaluate expressions.</p>
</div></blockquote>
</li>
<li><p class="first">If you have loaded Morphic, you may wish to open up a window:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;Self 0&quot;</span> <span class="n">desktop</span> <span class="nb">open</span>
<span class="n">Adjusting</span> <span class="n">VM</span> <span class="k">for</span> <span class="n">better</span> <span class="n">UI2</span> <span class="n">performance</span><span class="p">:</span>
<span class="n">_MaxPICSize</span><span class="p">:</span> <span class="mi">25</span>
<span class="n">_Flush</span>

<span class="n">The</span> <span class="n">ui2</span> <span class="n">desktop</span> <span class="ow">is</span> <span class="n">now</span> <span class="n">running</span><span class="o">.</span> <span class="n">Type</span><span class="p">:</span>
<span class="s2">&quot;desktop stop&quot;</span>  <span class="n">to</span> <span class="n">suspend</span> <span class="n">it</span><span class="p">,</span>
<span class="s2">&quot;desktop go&quot;</span>    <span class="n">to</span> <span class="n">resume</span> <span class="n">it</span> <span class="n">after</span> <span class="n">stopping</span><span class="p">,</span> <span class="ow">and</span>
<span class="s2">&quot;desktop close&quot;</span> <span class="n">to</span> <span class="n">close</span> <span class="n">it</span><span class="o">.</span>

<span class="n">desktop</span>
<span class="s2">&quot;Self 1&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>